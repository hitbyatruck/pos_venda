{% extends "base.html" %}

{% block content %}
<div class="container">
    <h2>Lista de Equipamentos Fabricados</h2>
    
    <table class="table table-striped table-hover">
        <thead>
            <tr>
                <th><a href="?ordenar_por=nome">Nome</a></th>
                <th><a href="?ordenar_por=referencia">Referência</a></th>
                <th><a href="?ordenar_por=categoria__nome">Categoria</a></th>
                <th>Ações</th>
            </tr>
        </thead>
        <tbody>
            {% for equipamento in equipamentos %}
            <tr>
                <td>{{ equipamento.nome }}</td>
                <td>{{ equipamento.referencia }}</td>
                <td>{{ equipamento.categoria.nome }}</td>
                <td>
                    <a href="{% url 'detalhes_equipamento' equipamento.id %}" class="btn btn-info btn-sm">Detalhes</a>
                    <a href="{% url 'editar_equipamento_fabricado' equipamento.id %}" class="btn btn-warning btn-sm">Editar</a>
                    {% if equipamento.id %}
                        <a href="{% url 'excluir_equipamento_fabricado' equipamento.id %}" class="btn btn-danger" onclick="return confirm('Tem a certeza que deseja excluir este equipamento?');">Excluir</a>
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<script>
    function confirmarExclusao(id) {
        if (confirm("Tem certeza que deseja excluir este equipamento?")) {
            window.location.href = "{% url 'excluir_equipamento_fabricado' id %}";
        }
    }
</script>

{% endblock %}
